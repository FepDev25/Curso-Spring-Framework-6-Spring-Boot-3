<h2>Formulario de productos</h2>

<form (ngSubmit)="save(productForm)" #productForm = "ngForm">

  <div>
    <input
      class="form-control"
      type="text"
      placeholder="Name"
      name="name"
      [(ngModel)]="product.name"
      #name = "ngModel"
      required>

      <div>
        @if ((name.touched || name.dirty) && name.invalid) {
          <div class="text-danger">
            Name is required
          </div>
        }
      </div>
  </div>

  <div>
    <input
      class="form-control"
      type="text"
      placeholder="Description"
      name="description"
      [(ngModel)]="product.description"
      #description = "ngModel"
      required>

      <div>
        @if ((description.touched || description.dirty) && description.invalid) {
          <div class="text-danger">
            Description is required
          </div>
        }
      </div>
  </div>

  <div>
    <input
      class="form-control"
      type="number"
      placeholder="Price"
      name="price"
      [(ngModel)]="product.price"
      #price = "ngModel"
      required min="0">

      <div>
        @if (price.errors?.['required']) {
          <div class="text-danger">
            Price is required
          </div>
        }
        @if (price.errors?.['min']) {
          <div class="text-danger">
            Price must be greater than 0
          </div>
        }
      </div>
  </div>

  <div>
    <button [disabled]="productForm.form.invalid" class="btn btn-sm btn-primary" type="submit">
      {{ product.id ? 'Update' : 'Save' }}
    </button>

    <button class="btn btn-sm btn-secondary" type="button" (click)="clean()"> Limpiar</button>
  </div>

</form>
